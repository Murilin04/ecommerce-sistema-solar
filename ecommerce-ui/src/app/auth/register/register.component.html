<div class="container">
  <h2>Cadastro de Integradores</h2>

  <mat-card class="mat-card">
    <form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">

      <div class="row">
        <mat-form-field appearance="outline">
          <mat-label>CNPJ</mat-label>
          <input matInput formControlName="cnpj" placeholder="CNPJ" mask="00.000.000/0000-00" style="color: #4A4F55;">
          <mat-error *ngIf="cadastroForm.get('cnpj')?.hasError('required')">
            O campo CNPJ é obrigatório
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Inscrição Estadual (Opcional)</mat-label>
          <input matInput formControlName="stateRegistration" style="color: #4A4F55;">
        </mat-form-field>

        <mat-checkbox formControlName="isMei">Sou MEI</mat-checkbox>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Razão Social</mat-label>
        <input matInput formControlName="companyName" style="color: #4A4F55;">
        <mat-error *ngIf="cadastroForm.get('companyName')?.hasError('required')">
          O campo Razão Social é obrigatório
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nome Fantasia (Opcional)</mat-label>
        <input matInput formControlName="tradeName" style="color: #4A4F55;">
      </mat-form-field>

      <div class="row">
        <mat-form-field appearance="outline">
          <mat-label>CEP</mat-label>
          <input matInput formControlName="postalCode" mask="00000-000" style="color: #4A4F55;">
          <mat-error *ngIf="cadastroForm.get('postalCode')?.hasError('required')">
            O campo CEP é obrigatório
          </mat-error>
          <mat-error *ngIf="cadastroForm.get('postalCode')?.hasError('invalidCep')">
            CEP inválido ou não encontrado
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>UF</mat-label>
          <mat-select formControlName="state" (selectionChange)="onEstadoChange($event.value)">
            <mat-option *ngFor="let estado of estados" [value]="estado.sigla">
              {{estado.sigla}} - {{estado.nome}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="cadastroForm.get('state')?.hasError('required')">
            O campo Estado é obrigatório
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cidade</mat-label>
          <mat-select formControlName="city">
            <mat-option *ngFor="let cidade of cidades" [value]="cidade.nome">
              {{cidade.nome}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="cadastroForm.get('city')?.hasError('required')">
            O campo Cidade é obrigatório
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Endereço</mat-label>
        <input matInput formControlName="address" style="color: #4A4F55;">
        <mat-error *ngIf="cadastroForm.get('address')?.hasError('required')">
          O campo Endereço é obrigatório
        </mat-error>
      </mat-form-field>

      <div class="row">
        <mat-form-field appearance="outline">
          <mat-label>Número</mat-label>
          <input matInput formControlName="addressNumber" style="color: #4A4F55;">
          <mat-error *ngIf="cadastroForm.get('addressNumber')?.hasError('required')">
            O campo Número é obrigatório
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Complemento (Opcional)</mat-label>
          <input matInput formControlName="addressComplement" style="color: #4A4F55;">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Bairro</mat-label>
          <input matInput formControlName="neighborhood" style="color: #4A4F55;">
          <mat-error *ngIf="cadastroForm.get('neighborhood')?.hasError('required')">
            O campo Bairro é obrigatório
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" style="color: #4A4F55;">
        <mat-error *ngIf="cadastroForm.get('email')?.hasError('required')">
          O campo Email é obrigatório
        </mat-error>
        <mat-error *ngIf="cadastroForm.get('email')?.hasError('email')">
          Email inválido
        </mat-error>
        <mat-error *ngIf="cadastroForm.get('email')?.hasError('emailTaken')">
          Este email já está cadastrado.
        </mat-error>
      </mat-form-field>

      <div class="row">
        <mat-form-field appearance="outline">
          <mat-label>Telefone Comercial</mat-label>
          <input matInput formControlName="phone" mask="(00) 0 0000-0000" style="color: #4A4F55;">
          <mat-error *ngIf="cadastroForm.get('phone')?.hasError('required')">
            O campo Telefone Comercial é obrigatório
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Whatsapp</mat-label>
          <input matInput formControlName="whatsapp" mask="(00) 0 0000-0000" style="color: #4A4F55;">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Senha</mat-label>
          <input matInput type="password" formControlName="password" style="color: #4A4F55;">
        </mat-form-field>
      </div>

      <button type="submit">Enviar</button>
    </form>
  </mat-card>
</div>
